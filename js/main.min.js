function playground(t){return new PLAYGROUND.Application(t)}!function(){var t=function(e,i){return"function"==typeof t.cache[i]?t.cache[i](e):t.spline(e,i||t.defaultEasing)},e=function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[0][e]=arguments[t][e];return arguments[0]};e(t,{defaultEasing:"016",cache:{linear:function(t){return t},inQuad:function(t){return t*t},outQuad:function(t){return t*(2-t)},inOutQuad:function(t){return.5>t?2*t*t:-1+(4-2*t)*t},inCubic:function(t){return t*t*t},outCubic:function(t){return--t*t*t+1},inOutCubic:function(t){return.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},inQuart:function(t){return t*t*t*t},outQuart:function(t){return 1- --t*t*t*t},inOutQuart:function(t){return.5>t?8*t*t*t*t:1-8*--t*t*t*t},inQuint:function(t){return t*t*t*t*t},outQuint:function(t){return 1+--t*t*t*t*t},inOutQuint:function(t){return.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t},inSine:function(t){return-1*Math.cos(t/1*(.5*Math.PI))+1},outSine:function(t){return Math.sin(t/1*(.5*Math.PI))},inOutSine:function(t){return-0.5*(Math.cos(Math.PI*t)-1)},inExpo:function(t){return 0==t?0:Math.pow(2,10*(t-1))},outExpo:function(t){return 1==t?1:-Math.pow(2,-10*t)+1},inOutExpo:function(t){return 0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},inCirc:function(t){return-1*(Math.sqrt(1-t*t)-1)},outCirc:function(t){return Math.sqrt(1-(t-=1)*t)},inOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},inElastic:function(t){var e=1.70158,i=0,s=1;if(0==t)return 0;if(1==t)return 1;if(i||(i=.3),1>s){s=1;var e=i/4}else var e=i/(2*Math.PI)*Math.asin(1/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},outElastic:function(t){var e=1.70158,i=0,s=1;if(0==t)return 0;if(1==t)return 1;if(i||(i=.3),1>s){s=1;var e=i/4}else var e=i/(2*Math.PI)*Math.asin(1/s);return s*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1},inOutElastic:function(t){var e=1.70158,i=0,s=1;if(0==t)return 0;if(2==(t/=.5))return 1;if(i||(i=.3*1.5),1>s){s=1;var e=i/4}else var e=i/(2*Math.PI)*Math.asin(1/s);return 1>t?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)):s*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1},inBack:function(t,e){return void 0==e&&(e=1.70158),1*t*t*((e+1)*t-e)},outBack:function(t,e){return void 0==e&&(e=1.70158),1*((t=t/1-1)*t*((e+1)*t+e)+1)},inOutBack:function(t,e){return void 0==e&&(e=1.70158),(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},inBounce:function(t){return 1-this.outBounce(1-t)},outBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOutBounce:function(t){return.5>t?.5*this.inBounce(2*t):.5*this.outBounce(2*t-1)+.5}},translateEasing:function(t){if(!this.cache[t]){for(var e=t.split(""),i=1,s=!1,n=!1,o=0;o<e.length;o++){var r=e[o];"-"===r?(i=-1,s=!0,e.splice(o--,1)):"+"===r?(i=1,e.splice(o--,1)):"t"===r?(n=!n,e.splice(o--,1)):e[o]=parseInt(e[o],16)*i}for(var a=Math.min.apply(null,e),h=Math.max.apply(null,e),u=h-a,c=[],o=0;o<e.length;o++){if(s)var u=Math.max(Math.abs(a),Math.abs(h)),l=e[o]/u;else var u=h-a,l=(e[o]-a)/u;n&&(0>l&&(l=0),l>1&&(l=1)),c.push(l)}this.cache[t]=c}return this.cache[t]},splineK:{},splineX:{},splineY:{},insertIntermediateValues:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]),i<t.length-1&&e.push(t[i+1]+.6*(t[i]-t[i+1]));return e},spline:function(t,e){if(!this.splineK[e]){var i=[],s=this.translateEasing(e);if(!s.length)return 0;for(var n=0;n<s.length;n++)i.push(n*(1/(s.length-1)));var o=i.map(function(){return 0});o=this.getNaturalKs(i,s,o),this.splineX[e]=i,this.splineY[e]=s,this.splineK[e]=o}if(t>1)return this.splineY[e][this.splineY[e].length-1];for(var o=this.splineK[e],i=this.splineX[e],s=this.splineY[e],n=1;i[n]<t;)n++;var r=(t-i[n-1])/(i[n]-i[n-1]),a=o[n-1]*(i[n]-i[n-1])-(s[n]-s[n-1]),h=-o[n]*(i[n]-i[n-1])+(s[n]-s[n-1]),u=(1-r)*s[n-1]+r*s[n]+r*(1-r)*(a*(1-r)+h*r);return u},getNaturalKs:function(t,e,i){for(var s=t.length-1,n=this.zerosMat(s+1,s+2),o=1;s>o;o++)n[o][o-1]=1/(t[o]-t[o-1]),n[o][o]=2*(1/(t[o]-t[o-1])+1/(t[o+1]-t[o])),n[o][o+1]=1/(t[o+1]-t[o]),n[o][s+1]=3*((e[o]-e[o-1])/((t[o]-t[o-1])*(t[o]-t[o-1]))+(e[o+1]-e[o])/((t[o+1]-t[o])*(t[o+1]-t[o])));return n[0][0]=2/(t[1]-t[0]),n[0][1]=1/(t[1]-t[0]),n[0][s+1]=3*(e[1]-e[0])/((t[1]-t[0])*(t[1]-t[0])),n[s][s-1]=1/(t[s]-t[s-1]),n[s][s]=2/(t[s]-t[s-1]),n[s][s+1]=3*(e[s]-e[s-1])/((t[s]-t[s-1])*(t[s]-t[s-1])),this.solve(n,i)},solve:function(t,e){for(var i=t.length,s=0;i>s;s++){for(var n=0,o=Number.NEGATIVE_INFINITY,r=s;i>r;r++)t[r][s]>o&&(n=r,o=t[r][s]);this.splineSwapRows(t,s,n);for(var r=s+1;i>r;r++){for(var a=s+1;i+1>a;a++)t[r][a]=t[r][a]-t[s][a]*(t[r][s]/t[s][s]);t[r][s]=0}}for(var r=i-1;r>=0;r--){var h=t[r][i]/t[r][r];e[r]=h;for(var a=r-1;a>=0;a--)t[a][i]-=t[a][r]*h,t[a][r]=0}return e},zerosMat:function(t,e){for(var i=[],s=0;t>s;s++){i.push([]);for(var n=0;e>n;n++)i[s].push(0)}return i},splineSwapRows:function(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}}),window.ease=t}(),window.PLAYGROUND={},PLAYGROUND.MOBILE=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),PLAYGROUND.Utils={extend:function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[0][e]=arguments[t][e];return arguments[0]},defaults:function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])"undefined"==typeof arguments[0][e]&&(arguments[0][e]=arguments[t][e]);return arguments[0]},merge:function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i){var n=i[s];"undefined"!=typeof t[s]&&"object"==typeof t[s]?this.merge(t[s],n):t[s]=n}}return t},invoke:function(t,e){for(var i=Array.prototype.slice.call(arguments,2),s=0;s<t.length;s++){var n=t[s];n[e]&&n[e].apply(n,i)}},throttle:function(t,e){var i,s=0;return function(){for(var n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);var r=this;Date.now()-s>e?(s=Date.now(),t.apply(r,n),clearTimeout(i)):(clearTimeout(i),i=setTimeout(function(){t.apply(r,n),s=Date.now()},Date.now()-s))}},wrapTo:function(t,e,i,s){if(t===e)return e;var n=t,o=this.wrappedDistance(t,e,i);return Math.abs(o)<s?e:(n+=(0>o?-1:1)*s,n>i?n-=i:0>n&&(n=i+n),n)},wrap:function(t,e,i){return e>t?i+t%i:t>=i?t%i:t},circWrap:function(t){return this.wrap(t,0,2*Math.PI)},circWrapTo:function(t,e,i){return this.wrapTo(t,e,2*Math.PI,i)},wrappedDistance:function(t,e,i){if(t===e)return 0;if(e>t)var s=-t-i+e,n=e-t;else var s=e-t,n=i-t+e;return Math.abs(s)>Math.abs(n)?n:s},circWrappedDistance:function(t,e){return this.wrappedDistance(t,e,2*Math.PI)},ground:function(t,e){return(t/e|0)*e},circDistance:function(t,e){return this.circWrappedDistance(t,e)},distance:function(t,e,i,s){if(arguments.length>2){var n=t-i,o=e-s;return Math.sqrt(n*n+o*o)}var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)},sprintf:function(t,e){for(var i in e){var s=new RegExp("{"+i+"}","g");t=t.replace(s,e[i])}return t}},PLAYGROUND.Utils.ease=ease,PLAYGROUND.Events=function(){this.listeners={}},PLAYGROUND.Events.prototype={on:function(t,e,i){if("object"==typeof t){var s={};for(var n in t)s[n]=this.on(n,t[n],i);return s}this.listeners[t]||(this.listeners[t]=[]);var o={once:!1,callback:e,context:i};return this.listeners[t].push(o),o},once:function(t,e,i){if("object"==typeof t){var s={};for(var n in t)s[n]=this.once(n,t[n],i);return s}this.listeners[t]||(this.listeners[t]=[]);var o={once:!0,callback:e,context:i};return this.listeners[t].push(o),o},off:function(t,e){for(var i=0,s=this.listeners[t].length;s>i;i++)this.listeners[t][i]===e&&(this.listeners[t].splice(i--,1),s--)},trigger:function(t,e){if(this.listeners.event)for(var i=0,s=this.listeners.event.length;s>i;i++){var n=this.listeners.event[i];n.callback.call(n.context||this,t,e)}if(this.listeners[t])for(var i=0,s=this.listeners[t].length;s>i;i++){var n=this.listeners[t][i];n.callback.call(n.context||this,e),n.once&&(this.listeners[t].splice(i--,1),s--)}}},PLAYGROUND.States=function(t){this.app=t,PLAYGROUND.Events.call(this),t.on("step",this.step.bind(this))},PLAYGROUND.States.prototype={step:function(t){if(this.next&&(!this.current||!this.current.locked)){var e=this.next;"function"==typeof e&&(e=new e),e.__created||(e.__created=!0,e.app=this.app,this.trigger("createstate",{state:e}),e.create&&e.create()),this.current&&this.trigger("leavestate",{prev:this.current,next:e,state:this.current}),this.trigger("enterstate",{prev:this.current,next:e,state:e}),this.current=e,this.current&&this.current.enter&&this.current.enter(),this.app.state=this.current,this.next=!1}},set:function(t){this.current&&this.current.leave&&this.current.leave(),this.next=t,this.step(0)}},PLAYGROUND.Utils.extend(PLAYGROUND.States.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.Application=function(t){function e(){i.loadFoo(.25),setTimeout(function(){i.emitLocalEvent("create"),i.setState(PLAYGROUND.DefaultState),i.handleResize(),PLAYGROUND.LoadingScreen&&i.setState(PLAYGROUND.LoadingScreen),PLAYGROUND.GameLoop(i),i.loader.once("ready",function(){i.firstBatch=!1,i.disabledUntilLoaded&&(i.skipEvents=!1),i.setState(PLAYGROUND.DefaultState),i.emitLocalEvent("ready"),i.handleResize()})})}var i=this;this.killed=!1,PLAYGROUND.Events.call(this),PLAYGROUND.Utils.merge(this,this.defaults,t),this.autoWidth=!this.width,this.autoHeight=!this.height,this.autoScale=!this.scale,this.container||(this.container=document.body),this.container!==document.body&&(this.customContainer=!0),"string"==typeof this.container&&(this.container=document.querySelector(this.container)),this.updateSize(),this.states=new PLAYGROUND.States(this),this.states.on("event",this.emitLocalEvent,this),this.mouse=new PLAYGROUND.Mouse(this,this.container),this.mouse.on("event",this.emitGlobalEvent,this),this.touch=new PLAYGROUND.Touch(this,this.container),this.touch.on("event",this.emitGlobalEvent,this),this.keyboard=new PLAYGROUND.Keyboard(this),this.keyboard.on("event",this.emitGlobalEvent,this),this.gamepads=new PLAYGROUND.Gamepads(this),this.gamepads.on("event",this.emitGlobalEvent,this),this.tweens=new PLAYGROUND.TweenManager(this),this.ease=PLAYGROUND.Utils.ease,PLAYGROUND.Sound(this),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),this.resizelistener=PLAYGROUND.Utils.throttle(this.handleResize.bind(this),100),window.addEventListener("resize",this.resizelistener),this.images={},this.atlases={},this.data={},this.loader=new PLAYGROUND.Loader(this),this.loadFoo(.25),this.plugins=[];for(var s in PLAYGROUND){var n=PLAYGROUND[s];n.plugin&&this.plugins.push(new n(this))}this.emitLocalEvent("preload"),this.firstBatch=!0,this.disabledUntilLoaded&&(this.skipEvents=!0),this.loader.once("ready",e)},PLAYGROUND.Application.prototype={defaults:{background:"#272822",smoothing:1,paths:{base:"",images:"images/",fonts:"fonts/"},offsetX:0,offsetY:0,skipEvents:!1,disabledUntilLoaded:!0},setState:function(t){this.states.set(t)},insertAsset:function(t,e,i){for(var s=i.split("/"),n=e,o=0;o<s.length-1;o++){var r=s[o];n[r]||(n[r]={}),n=n[r]}n[s.pop()]=t},getPath:function(t){return this.paths.base+(this.paths[t]||t+"/")},getAssetEntry:function(t,e,i){var e=this.paths[e]||e+"/",s=t.match(/(.*)\..*/),n=s?s[1]:t,o=t.split("."),r=t;if(o.length>1){var a=o.pop();t=o.join(".")}else{var a=i;r+="."+i}return{key:n,url:this.paths.base+e+r,path:this.paths.base+e+t,ext:a}},emitLocalEvent:function(t,e){this.trigger(t,e),"render"===t&&this.skipEvents&&!this.loader.ready||!this[t]||this[t](e)},emitGlobalEvent:function(t,e){return this.state?(this.trigger(t,e),"render"===t&&this.skipEvents&&!this.loader.ready||!this.event||this.event(t,e),"render"===t&&this.skipEvents&&!this.loader.ready||!this[t]||this[t](e),this.state.event&&this.state.event(t,e),this.state[t]&&this.state[t](e),void this.trigger("after"+t,e)):this.emitLocalEvent(t,e)},updateSize:function(){if(this.customContainer)var t=this.container.offsetWidth,e=this.container.offsetHeight;else var t=window.innerWidth,e=window.innerHeight;(this.autoScale||this.autoWidth||this.autoHeight)&&(!this.autoHeight&&this.autoWidth?(this.autoScale&&(this.scale=e/this.height),this.width=Math.ceil(t/this.scale)):!this.autoWidth&&this.autoHeight?(this.autoScale&&(this.scale=t/this.width),this.height=Math.ceil(e/this.scale)):this.autoWidth&&this.autoHeight&&this.autoScale?(this.scale=1,this.width=t,this.height=e):this.autoWidth&&this.autoHeight?(this.width=Math.ceil(t/this.scale),this.height=Math.ceil(e/this.scale)):this.scale=Math.min(t/this.width,e/this.height)),this.offsetX=(t-this.width*this.scale)/2|0,this.offsetY=(e-this.height*this.scale)/2|0,this.center={x:this.width/2|0,y:this.height/2|0}},handleVisibilityChange:function(){this.emitGlobalEvent("visibilitychange",{visible:!document.hidden,hidden:document.hidden})},handleResize:function(){this.emitGlobalEvent("beforeresize",{}),this.updateSize(),this.mouse.handleResize(),this.touch.handleResize(),this.emitGlobalEvent("resize",{})},request:function(t){function e(e,i){var s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=function(s){var n=s.target;return 200!==n.status&&0!==n.status?i(new Error("Failed to get "+t)):void e(n)},s.send()}return new Promise(e)},loadFoo:function(t){var e=this.loader;this.loader.add("foo "+t),setTimeout(function(){e.success("foo "+t)},1e3*t)},loadData:function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];if("object"==typeof e)for(var i in e)this.loadData(e[i]);else this.loadDataItem(e)}},loadDataItem:function(t){function e(t){var e=i.key.indexOf("/")>-1;if("json"===i.ext){var n=JSON.parse(t.responseText);if(e){var o=i.key.split("/")[0];s.data[o]||(s.data[o]={}),PLAYGROUND.Utils.extend(s.data[o],n)}else s.data[i.key]||(s.data[i.key]={}),PLAYGROUND.Utils.defaults(s.data[i.key],n)}else if(e){var o=i.key.split("/")[0];s.data[o]||(s.data[o]=""),s.data[i.key]+=t.responseText}else s.data[i.key]=t.responseText;s.loader.success(i.url)}var i=this.getAssetEntry(t,"data","json"),s=this;this.loader.add(),this.request(i.url).then(e)},loadImage:function(){return this.loadImages.apply(this,arguments)},loadImages:function(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];if("object"==typeof i)for(var s in i)t=t.concat(this.loadImages(i[s]));else t.push(this.loadOneImage(i))}return Promise.all(t)},loadOneImage:function(t){var e=this;if(this._imageLoaders||(this._imageLoaders={}),!this._imageLoaders[t]){var i=function(i,s){var n=e.loader,o=e.getAssetEntry(t,"images","png");e.loader.add(o.path);var r=new Image;r.addEventListener("load",function(){e.images[o.key]=r,i(r),n.success(o.url),o.image=r,e.insertAsset(r,e.images,o.key),e.emitLocalEvent("imageready",o)}),r.addEventListener("error",function(){s("can't load "+o.url),n.error(o.url)}),r.src=o.url};e._imageLoaders[t]=new Promise(i)}return this._imageLoaders[t]},loadFont:function(){for(var t=[],e=0;e<arguments.length;e++){var i=arguments[e];t.push(this.loadFontItem(i))}return Promise.all(t)},loadFonts:function(){return this.loadFont.apply(this,arguments)},loadFontItem:function(t){if(!this.fontStyleSheet){var e=document.createElement("style");document.head.appendChild(e),this.fontStyleSheet=e}var i=this.getAssetEntry(t,"fonts","ttf"),s={woff:"woff",otf:"opentype",ttf:"truetype"}[i.ext],n="@font-face { font-family: '{name}'; font-style: 'normal'; font-weight: 400, 800; src: url(fonts/{name}.{ext}) format('{format}'); }",o=PLAYGROUND.Utils.sprintf(n,{name:t,ext:i.ext,format:s});this.fontStyleSheet.innerHTML+=o;var r=this;if(this._fontPromises||(this._fontPromises={}),!this._fontPromises[t]){var a=function(e,i){r.loader.add("font "+t);var s=setInterval(function(){var i=cq(100,32).font("14px somethingrandom").fillStyle("#fff").textBaseline("top");i.context.fillText("lorem ipsum dolores sit",0,4);var n=cq(100,32).font("14px '"+t+"'").fillStyle("#fff").textBaseline("top");n.context.fillText("lorem ipsum dolores sit",0,4),cq.compare(i,n)||(r.loader.success("font"+t),clearInterval(s),e())},100)};this._fontPromises[t]=new Promise(a)}return this._fontPromises[t]},render:function(){},enableInputs:function(){this.mouse.enabled=!0,this.touch.enabled=!0,this.keyboard.enabled=!0},disableInputs:function(){this.mouse.enabled=!1,this.touch.enabled=!1,this.keyboard.enabled=!1},kill:function(){this.killed=!0,this.trigger("kill"),window.removeEventListener("resize",this.resizelistener)}},PLAYGROUND.Utils.extend(PLAYGROUND.Application.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.GameLoop=function(t){function e(e){t.emitGlobalEvent("prerender",e),t.emitGlobalEvent("render",e),t.emitGlobalEvent("postrender",e)}function i(e){t.emitGlobalEvent("step",e)}function s(){if(!t.killed){if(requestAnimationFrame(s),t.frameskip){if(o++,o!==t.frameskip)return;o=0}var r=Date.now()-n;if(n=Date.now(),!(r>1e3)){var a=r/1e3;t.lifetime+=a,t.elapsed=a,i(a),e(a),t.opcost=r/1e3,t.ops=1e3/t.opcost}}}t.lifetime=0,t.ops=0,t.opcost=0;var n=Date.now(),o=0;requestAnimationFrame(s)},PLAYGROUND.Gamepads=function(t){this.app=t,PLAYGROUND.Events.call(this),this.getGamepads=navigator.getGamepads||navigator.webkitGetGamepads,this.gamepadmoveEvent={},this.gamepaddownEvent={},this.gamepadupEvent={},this.gamepadholdEvent={},this.gamepads={},this.app.on("step",this.step.bind(this))},PLAYGROUND.Gamepads.prototype={buttons:{0:"1",1:"2",2:"3",3:"4",4:"l1",5:"r1",6:"l2",7:"r2",8:"select",9:"start",12:"up",13:"down",14:"left",15:"right"},zeroState:function(){for(var t=[],e=0;15>=e;e++)t.push({pressed:!1,value:0});return{axes:[],buttons:t}},createGamepad:function(){for(var t={buttons:{},sticks:[{x:0,y:0},{x:0,y:0}]},e=0;16>e;e++){var i=this.buttons[e];t.buttons[i]=!1}return t},step:function(){if(navigator.getGamepads)for(var t=navigator.getGamepads(),e=0;e<t.length;e++){var i=t[e];if(i){this[e]||(this[e]=this.createGamepad());for(var s=[].concat(i.buttons),n=12;15>=n;n++)s[n]={pressed:!1,value:0};var o=this[e];if(i.axes){Math.abs(i.axes[0])>.01&&(i.axes[0]<0&&(s[14].pressed=!0),i.axes[0]>0&&(s[15].pressed=!0)),Math.abs(i.axes[1])>.01&&(i.axes[1]<0&&(s[12].pressed=!0),i.axes[1]>0&&(s[13].pressed=!0));var r=!1,a=!1,h=!1;o.sticks[0].x!==i.axes[0]&&(r=!0,a=!0),o.sticks[0].y!==i.axes[1]&&(r=!0,a=!0),o.sticks[1].x!==i.axes[2]&&(r=!0,h=!0),o.sticks[1].y!==i.axes[3]&&(r=!0,h=!0),r&&(this.gamepadmoveEvent.old=[PLAYGROUND.Utils.extend({},o.sticks[0]),PLAYGROUND.Utils.extend({},o.sticks[1])],o.sticks[0].x=i.axes[0],o.sticks[0].y=i.axes[1],o.sticks[1].x=i.axes[2],o.sticks[1].y=i.axes[3],this.gamepadmoveEvent.sticks=o.sticks,a?this.gamepadmoveEvent.a=o.sticks[0]:this.gamepadmoveEvent.a=!1,h?this.gamepadmoveEvent.b=o.sticks[1]:this.gamepadmoveEvent.b=!1,this.gamepadmoveEvent.gamepad=e,this.trigger("gamepadmove",this.gamepadmoveEvent))}for(var u=0;u<s.length;u++){var c=this.buttons[u];s[u].pressed&&!o.buttons[c]&&(o.buttons[c]=!0,this.gamepaddownEvent.button=this.buttons[u],this.gamepaddownEvent.gamepad=e,this.trigger("gamepaddown",this.gamepaddownEvent)),s[u].pressed?(this.gamepadholdEvent.button=this.buttons[u],this.gamepadholdEvent.gamepad=e,this.gamepadholdEvent.dt=this.app.elapsed,this.trigger("gamepadhold",this.gamepadholdEvent)):!s[u].pressed&&o.buttons[c]&&(o.buttons[c]=!1,this.gamepadupEvent.button=this.buttons[u],this.gamepadupEvent.gamepad=e,this.trigger("gamepadup",this.gamepadupEvent))}}}}},PLAYGROUND.Utils.extend(PLAYGROUND.Gamepads.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.Keyboard=function(t){PLAYGROUND.Events.call(this),this.app=t,this.keys={},this.any=!1,this.keydownlistener=this.keydown.bind(this),this.keyuplistener=this.keyup.bind(this),this.keypresslistener=this.keypress.bind(this),document.addEventListener("keydown",this.keydownlistener),document.addEventListener("keyup",this.keyuplistener),document.addEventListener("keypress",this.keypresslistener),this.keydownEvent={},this.keyupEvent={},this.keypressEvent={},this.preventDefault=!0,this.enabled=!0,this.app.on("kill",this.kill.bind(this))},PLAYGROUND.Keyboard.prototype={kill:function(){document.removeEventListener("keydown",this.keydownlistener),document.removeEventListener("keyup",this.keyuplistener),document.removeEventListener("keypress",this.keypresslistener)},keycodes:{37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"escape",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",96:"numpad0",97:"numpad1",98:"numpad2",99:"numpad3",100:"numpad4",101:"numpad5",102:"numpad6",103:"numpad7",104:"numpad8",105:"numpad9",106:"numpadmul",107:"numpadadd",109:"numpadsub",110:"numpaddec",111:"numpaddiv",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:"semicolon",187:"equal",188:"comma",189:"dash",190:"period",191:"slash",192:"graveaccent",219:"openbracket",220:"backslash",221:"closebraket",222:"singlequote"},bypassKeys:["f12","f11","f5","ctrl","alt","shift"],keydown:function(t){if(this.enabled){if(t.which>=48&&t.which<=90)var e=String.fromCharCode(t.which).toLowerCase();else var e=this.keycodes[t.which];if(!this.keys[e]&&(this.any++,this.keydownEvent.key=e,this.keydownEvent.original=t,this.keys[e]=!0,this.trigger("keydown",this.keydownEvent),this.preventDefault&&document.activeElement===document.body)){var i=t.metaKey;if(!i)for(var s=0;s<this.bypassKeys.length;s++)if(this.keys[this.bypassKeys[s]]){i=!0;break}i||(t.preventDefault(),t.stopPropagation())}}},keyup:function(t){if(this.enabled){if(t.which>=48&&t.which<=90)var e=String.fromCharCode(t.which).toLowerCase();else var e=this.keycodes[t.which];this.any--,this.keyupEvent.key=e,this.keyupEvent.original=t,this.keys[e]=!1,this.trigger("keyup",this.keyupEvent)}},keypress:function(t){if(this.enabled){if(t.which>=48&&t.which<=90)var e=String.fromCharCode(t.which).toLowerCase();else var e=this.keycodes[t.which];this.keypressEvent.key=e,this.keypressEvent.original=t,this.trigger("keypress",this.keypressEvent)}}},PLAYGROUND.Utils.extend(PLAYGROUND.Keyboard.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.Pointer=function(t){this.app=t,t.on("touchstart",this.touchstart,this),t.on("touchend",this.touchend,this),t.on("touchmove",this.touchmove,this),t.on("mousemove",this.mousemove,this),t.on("mousedown",this.mousedown,this),t.on("mouseup",this.mouseup,this),t.on("mousewheel",this.mousewheel,this),this.pointers=t.pointers={},this.lastTap=0},PLAYGROUND.Pointer.plugin=!0,PLAYGROUND.Pointer.prototype={updatePointer:function(t){this.pointers[t.id]||(this.pointers[t.id]={});var e=this.pointers[t.id];return e.x=t.x,e.y=t.y,e.id=t.id,e},removePointer:function(t){delete this.pointers[t.id]},touchstart:function(t){t.touch=!0,this.updatePointer(t),this.pointerdown(t),this.app.emitGlobalEvent("pointerdown",t)},touchend:function(t){t.touch=!0,this.pointerup(t),this.removePointer(t),this.app.emitGlobalEvent("pointerup",t)},touchmove:function(t){t.touch=!0,this.updatePointer(t),this.pointermove(t),this.app.emitGlobalEvent("pointermove",t)},mousemove:function(t){t.mouse=!0,this.updatePointer(t),this.pointermove(t),this.app.emitGlobalEvent("pointermove",t)},mousedown:function(t){t.mouse=!0,this.updatePointer(t),this.app.emitGlobalEvent("pointerdown",t),this.pointerdown(t)},mouseup:function(t){t.mouse=!0,this.pointerup(t),this.app.emitGlobalEvent("pointerup",t)},mousewheel:function(t){t.mouse=!0,this.app.emitGlobalEvent("pointerwheel",t)},pointerdown:function(t){var e=this.pointers[t.id];e.pressed=!0;var i=this.app.lifetime-e.lastTap;e.lastTap=this.app.lifetime,.4>i&&e.tapPosition&&PLAYGROUND.Utils.distance(e,e.tapPosition)<5&&(this.app.emitGlobalEvent("pointerdoubletap",e),e.lastTap=0),e.tapPosition={x:t.x,y:t.y}},pointermove:function(t){var e=this.pointers[t.id];!e.dragging&&e.pressed&&PLAYGROUND.Utils.distance(e.tapPosition,t)>5&&(e.dragging=!0),t.dragging=e.dragging},pointerup:function(t){var e=this.pointers[t.id];e.pressed=!1,e.dragging=!1}},PLAYGROUND.Loader=function(t){this.app=t,PLAYGROUND.Events.call(this),this.reset()},PLAYGROUND.Loader.prototype={add:function(t){return this.queue++,this.count++,this.ready=!1,this.trigger("add",t),t},error:function(t){this.trigger("error",t)},success:function(t){this.queue--,this.progress=1-this.queue/this.count,this.trigger("load",t),this.queue<=0&&(this.reset(),this.trigger("ready"))},reset:function(){this.progress=0,this.queue=0,this.count=0,this.ready=!0}},PLAYGROUND.Utils.extend(PLAYGROUND.Loader.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.Mouse=function(t,e){var i=this;this.app=t,PLAYGROUND.Events.call(this),this.element=e,this.preventContextMenu=!0,this.enabled=!0,this.mousemoveEvent={},this.mousedownEvent={},this.mouseupEvent={},this.mousewheelEvent={},this.x=0,this.y=0,this.mousemovelistener=this.mousemove.bind(this),this.mousedownlistener=this.mousedown.bind(this),this.mouseuplistener=this.mouseup.bind(this),this.mouseoutlistener=this.mouseout.bind(this),this.contextmenulistener=function(t){i.preventContextMenu&&!t.metaKey&&t.preventDefault()},e.addEventListener("mousemove",this.mousemovelistener),e.addEventListener("mousedown",this.mousedownlistener),e.addEventListener("mouseup",this.mouseuplistener),e.addEventListener("mouseout",this.mouseoutlistener),e.addEventListener("contextmenu",this.contextmenulistener),this.app.on("kill",this.kill.bind(this)),this.enableMousewheel(),e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,this.handleResize()},PLAYGROUND.Mouse.prototype={kill:function(){this.element.removeEventListener("mousemove",this.mousemovelistener),this.element.removeEventListener("mousedown",this.mousedownlistener),this.element.removeEventListener("mouseup",this.mouseuplistener),this.element.removeEventListener("mouseout",this.mouseoutlistener),this.element.removeEventListener("contextmenu",this.contextmenulistener)},mouseout:function(t){for(var e=0;3>e;e++)this.mouseup({button:e})},lock:function(){this.locked=!0,this.element.requestPointerLock()},unlock:function(){this.locked=!1,document.exitPointerLock()},getElementOffset:function(t){var e=0,i=0;do e+=t.offsetLeft,i+=t.offsetTop;while(t=t.offsetParent);return{x:e,y:i}},handleResize:function(){this.elementOffset=this.getElementOffset(this.element)},mousemove:PLAYGROUND.Utils.throttle(function(t){this.enabled&&(this.x=this.mousemoveEvent.x=(t.pageX-this.elementOffset.x-this.app.offsetX)/this.app.scale|0,this.y=this.mousemoveEvent.y=(t.pageY-this.elementOffset.y-this.app.offsetY)/this.app.scale|0,this.mousemoveEvent.original=t,this.locked&&(this.mousemoveEvent.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.mousemoveEvent.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.app.mouseToTouch?(this.mousemoveEvent.id=this.mousemoveEvent.identifier=255,this.trigger("touchmove",this.mousemoveEvent)):(this.mousemoveEvent.id=this.mousemoveEvent.identifier=255,this.trigger("mousemove",this.mousemoveEvent)))},15),mousedown:function(t){if(this.enabled){var e=["left","middle","right"][t.button];this.mousedownEvent.x=this.mousemoveEvent.x,this.mousedownEvent.y=this.mousemoveEvent.y,this.mousedownEvent.button=e,this.mousedownEvent.original=t,this[e]=!0,this.mousedownEvent.id=this.mousedownEvent.identifier=255,this.app.mouseToTouch?(this.trigger("touchmove",this.mousedownEvent),this.trigger("touchstart",this.mousedownEvent)):this.trigger("mousedown",this.mousedownEvent)}},mouseup:function(t){if(this.enabled){var e=["left","middle","right"][t.button];this[e]&&(this.mouseupEvent.x=this.mousemoveEvent.x,this.mouseupEvent.y=this.mousemoveEvent.y,this.mouseupEvent.button=e,this.mouseupEvent.original=t,this.mouseupEvent.id=this.mouseupEvent.identifier=255,this.app.mouseToTouch?this.trigger("touchend",this.mouseupEvent):this.trigger("mouseup",this.mouseupEvent),this[e]=!1)}},mousewheel:function(t){this.mousewheelEvent.x=this.mousemoveEvent.x,this.mousewheelEvent.y=this.mousemoveEvent.y,this.mousewheelEvent.button=["none","left","middle","right"][t.button],this.mousewheelEvent.original=t,this.mousewheelEvent.id=this.mousewheelEvent.identifier=255,this[t.button]=!1,this.trigger("mousewheel",this.mousewheelEvent)},enableMousewheel:function(){for(var t=("onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"]),e=this.mousewheel.bind(this),i=this,s=PLAYGROUND.Utils.throttle(function(t){var s=t||window.event,n=([].slice.call(arguments,1),0),o=0;s.wheelDelta&&(n=s.wheelDelta),s.detail&&(n=-1*s.detail),s.deltaY&&(o=-1*s.deltaY,n=o),void 0!==s.wheelDeltaY&&(o=s.wheelDeltaY);var r=n?n:o;i.mousewheelEvent.x=i.mousemoveEvent.x,i.mousewheelEvent.y=i.mousemoveEvent.y,i.mousewheelEvent.delta=r/Math.abs(r),i.mousewheelEvent.original=s,e(i.mousewheelEvent),s.preventDefault()},40),n=t.length;n;)i.element.addEventListener(t[--n],function(t){s(t),t.preventDefault(),t.stopPropagation()},!1)}},PLAYGROUND.Utils.extend(PLAYGROUND.Mouse.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.Sound=function(t){var e=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;e&&!t.forceAudioFallback?(PLAYGROUND.audioContext||(PLAYGROUND.audioContext=new e),t.audioContext=PLAYGROUND.audioContext,t.sound=new PLAYGROUND.SoundWebAudioAPI(t,t.audioContext),t.music=new PLAYGROUND.SoundWebAudioAPI(t,t.audioContext)):(t.sound=new PLAYGROUND.SoundAudio(t),t.music=new PLAYGROUND.SoundAudio(t))},PLAYGROUND.Application.prototype.playSound=function(t,e){return this.sound.play(t,e)},PLAYGROUND.Application.prototype.stopSound=function(t){this.sound.stop(t)},PLAYGROUND.Application.prototype.loadSound=function(){return this.loadSounds.apply(this,arguments)},PLAYGROUND.Application.prototype.loadSounds=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];if("object"==typeof e)for(var i in e)this.loadSounds(e[i]);else this.sound.load(e)}},function t(e,i,s){function n(r,a){if(!i[r]){if(!e[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i?i:t)},c,c.exports,t,e,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,e,i){(function(e){"use strict";var i=e.AudioContext||e.webkitAudioContext,s=t("stereo-panner-node");i&&!i.prototype.createStereoPanner&&(i.prototype.createStereoPanner=function(){return new s(this)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"stereo-panner-node":4}],2:[function(t,e,i){"use strict";var s=4096,n=new Float32Array(s),o=new Float32Array(s);!function(){for(var t=0;s>t;t++)n[t]=Math.cos(t/s*Math.PI*.5),o[t]=Math.sin(t/s*Math.PI*.5)}(),e.exports={L:n,R:o}},{}],3:[function(t,e,i){(function(i){"use strict";function s(t){this.audioContext=t,this.inlet=t.createChannelSplitter(2),this._pan=t.createGain(),this.pan=this._pan.gain,this._wsL=t.createWaveShaper(),this._wsR=t.createWaveShaper(),this._L=t.createGain(),this._R=t.createGain(),this.outlet=t.createChannelMerger(2),this.inlet.channelCount=2,this.inlet.channelCountMode="explicit",this._pan.gain.value=0,this._wsL.curve=n.L,this._wsR.curve=n.R,this._L.gain.value=0,this._R.gain.value=0,this.inlet.connect(this._L,0),this.inlet.connect(this._R,1),this._L.connect(this.outlet,0,0),this._R.connect(this.outlet,0,1),this._pan.connect(this._wsL),this._pan.connect(this._wsR),this._wsL.connect(this._L.gain),this._wsR.connect(this._R.gain),this._isConnected=!1,this._dc1buffer=null,this._dc1=null}var n=t("./curve");s.prototype.connect=function(t){var e=this.audioContext;this._isConnected||(this._isConnected=!0,this._dc1buffer=e.createBuffer(1,2,e.sampleRate),this._dc1buffer.getChannelData(0).set([1,1]),this._dc1=e.createBufferSource(),this._dc1.buffer=this._dc1buffer,this._dc1.loop=!0,this._dc1.start(e.currentTime),
this._dc1.connect(this._pan)),i.AudioNode.prototype.connect.call(this.outlet,t)},s.prototype.disconnect=function(){var t=this.audioContext;this._isConnected&&(this._isConnected=!1,this._dc1.stop(t.currentTime),this._dc1.disconnect(),this._dc1=null,this._dc1buffer=null),i.AudioNode.prototype.disconnect.call(this.outlet)},e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./curve":2}],4:[function(t,e,i){"use strict";function s(t){var e=new n(t);return Object.defineProperties(e.inlet,{pan:{value:e.pan,enumerable:!0},connect:{value:function(t){return e.connect(t)}},disconnect:{value:function(){return e.disconnect()}}}),e.inlet}var n=t("./stereo-panner-impl");e.exports=s},{"./stereo-panner-impl":3}]},{},[1]),PLAYGROUND.SoundWebAudioAPI=function(t,e){this.app=t;var i=(new Audio).canPlayType("audio/mp3"),s=(new Audio).canPlayType('audio/ogg; codecs="vorbis"');"mp3"===this.app.preferedAudioFormat?i?this.audioFormat="mp3":this.audioFormat="ogg":s?this.audioFormat="ogg":this.audioFormat="mp3",this.context=e,this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination),this.compressor=this.context.createDynamicsCompressor(),this.compressor.connect(this.gainNode),this.output=this.compressor,this.gainNode.gain.value=1,this.pool=[],this.volume=1,this.loops=[],this.app.on("step",this.step.bind(this))},PLAYGROUND.SoundWebAudioAPI.prototype={buffers:{},aliases:{},alias:function(t,e,i,s){this.aliases[t]={source:e,volume:i,rate:s}},setMaster:function(t){this.volume=t,this.gainNode.gain.value=t},load:function(t){var e=this.app.getAssetEntry(t,"sounds",this.audioFormat),i=this,s=new XMLHttpRequest;s.open("GET",e.url,!0),s.responseType="arraybuffer";this.app.loader.add(e.url);s.onload=function(){i.context.decodeAudioData(this.response,function(t){i.buffers[e.key]=t,i.app.loader.success(e.url)})},s.send()},cleanArray:function(t,e){for(var i=0,s=t.length;s>i;i++)(null===t[i]||e&&t[i][e])&&(t.splice(i--,1),s--)},getSoundBuffer:function(){if(!this.pool.length)for(var t=0;100>t;t++){var e,i,s,n=[e=this.context.createBufferSource(),i=this.context.createGain(),s=this.context.createStereoPanner()];this.pool.push(n),PLAYGROUND.MOBILE?(n[0].connect(n[1]),n[1].connect(this.gainNode)):(n[0].connect(n[1]),n[1].connect(n[2]),n[2].connect(this.output))}return this.pool.pop()},play:function(t,e){var i=this.aliases[t],s=this.getSoundBuffer();return i&&(t=i.source),bufferSource=s[0],bufferSource.gainNode=s[1],bufferSource.pannerNode=s[2],bufferSource.buffer=this.buffers[t],bufferSource.loop=e||!1,bufferSource.key=t,bufferSource.alias=i,this.setVolume(bufferSource,1),this.setPlaybackRate(bufferSource,1),this.loop,bufferSource.start(0),bufferSource.volumeLimit=1,bufferSource},stop:function(t){t&&t.stop(0)},setPlaybackRate:function(t,e){return t?(t.alias&&(e*=t.alias.rate),t.playbackRate.value=e):void 0},getVolume:function(t){return t?t.gainNode.gain.value:void 0},setVolume:function(t,e){return t?(t.alias&&(e*=t.alias.volume),t.gainNode.gain.value=Math.max(0,e)):void 0},setPanning:function(t,e){t.pannerNode.pan.value=e},getPanning:function(t){return t.pannerNode.pan.value},fadeOut:function(t){return t?(t.fadeOut=!0,this.loops.push(t),t):void 0},fadeIn:function(t){return t?(t.fadeIn=!0,this.loops.push(t),this.setVolume(t,0),t):void 0},step:function(t){for(var e=0;e<this.loops.length;e++){var i=this.loops[e];if(i.fadeIn){var s=this.getVolume(i);s=this.setVolume(i,Math.min(1,s+.5*t)),s>=1&&this.loops.splice(e--,1)}if(i.fadeOut){var s=this.getVolume(i);s=this.setVolume(i,Math.min(1,s-.5*t)),0>=s&&(this.loops.splice(e--,1),this.stop(i))}}}},PLAYGROUND.SoundAudio=function(t){this.app=t;var e=(new Audio).canPlayType("audio/mp3"),i=(new Audio).canPlayType('audio/ogg; codecs="vorbis"');"mp3"===this.app.preferedAudioFormat?e?this.audioFormat="mp3":this.audioFormat="ogg":i?this.audioFormat="ogg":this.audioFormat="mp3"},PLAYGROUND.SoundAudio.prototype={samples:{},setMaster:function(t){this.volume=t},setMasterPosition:function(){},setPosition:function(t,e,i){},load:function(t){console.log(t,this.audioFormat);var e="sounds/"+t+"."+this.audioFormat,i=this.app.loader;this.app.loader.add(e);var s=this.samples[t]=new Audio;s.addEventListener("canplay",function(){console.log("CANPLAY"),this.pause(),i.success(e)}),s.addEventListener("error",function(){i.error(e)}),s.src=e,s.play()},play:function(t,e){var i=this.samples[t];return i.currentTime=0,i.loop=e,i.play(),i},stop:function(t){t&&t.pause()},step:function(t){},setPlaybackRate:function(t,e){},setVolume:function(t,e){t.volume=e*this.volume},setPosition:function(){},setPanning:function(t,e){}},PLAYGROUND.Touch=function(t,e){PLAYGROUND.Events.call(this),this.app=t,this.element=e,this.touches={},this.enabled=!0,this.x=0,this.y=0,this.touchmovelistener=this.touchmove.bind(this),this.touchstartlistener=this.touchstart.bind(this),this.touchendlistener=this.touchend.bind(this),e.addEventListener("touchmove",this.touchmovelistener),e.addEventListener("touchstart",this.touchstartlistener),e.addEventListener("touchend",this.touchendlistener),this.app.on("kill",this.kill.bind(this))},PLAYGROUND.Touch.prototype={kill:function(){this.element.removeEventListener("touchmove",this.touchmovelistener),this.element.removeEventListener("touchstart",this.touchstartlistener),this.element.removeEventListener("touchend",this.touchendlistener)},getElementOffset:function(t){var e=0,i=0;do e+=t.offsetLeft,i+=t.offsetTop;while(t=t.offsetParent);return{x:e,y:i}},handleResize:function(){this.elementOffset=this.getElementOffset(this.element)},touchmove:function(t){if(this.enabled){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e];touchmoveEvent={},this.x=touchmoveEvent.x=(i.pageX-this.elementOffset.x-this.app.offsetX)/this.app.scale|0,this.y=touchmoveEvent.y=(i.pageY-this.elementOffset.y-this.app.offsetY)/this.app.scale|0,touchmoveEvent.original=i,touchmoveEvent.id=touchmoveEvent.identifier=i.identifier,this.touches[i.identifier].x=touchmoveEvent.x,this.touches[i.identifier].y=touchmoveEvent.y,this.trigger("touchmove",touchmoveEvent)}t.preventDefault()}},touchstart:function(t){if(this.enabled){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s={};this.x=s.x=(i.pageX-this.elementOffset.x-this.app.offsetX)/this.app.scale|0,this.y=s.y=(i.pageY-this.elementOffset.y-this.app.offsetY)/this.app.scale|0,s.original=t.touch,s.id=s.identifier=i.identifier,this.touches[i.identifier]={x:s.x,y:s.y},this.trigger("touchstart",s)}t.preventDefault()}},touchend:function(t){if(this.enabled){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],s={};s.x=(i.pageX-this.elementOffset.x-this.app.offsetX)/this.app.scale|0,s.y=(i.pageY-this.elementOffset.y-this.app.offsetY)/this.app.scale|0,s.original=i,s.id=s.identifier=i.identifier,delete this.touches[i.identifier],this.trigger("touchend",s)}t.preventDefault()}}},PLAYGROUND.Utils.extend(PLAYGROUND.Touch.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.Tween=function(t,e){PLAYGROUND.Events.call(this),this.manager=t,this.context=e,PLAYGROUND.Utils.extend(this,{prevEasing:"045",prevDuration:.5}),this.clear()},PLAYGROUND.Tween.prototype={add:function(t,e,i){return"undefined"!=typeof e?this.prevDuration=e:e=.5,i?this.prevEasing=i:i="045",this.actions.push([t,e,i]),this},clear:function(){return this.actions=[],this.index=-1,this.current=!1,this},discard:function(){return this.manager.discard(this.context,this),this},to:function(t,e,i){return this.add(t,e,i)},call:function(t,e){for(var i=["call",t,e||this.context],s=2;s<arguments.length;s++)i.push(arguments[s]);return this.actions.push(i),this},loop:function(){return this.looped=!0,this},repeat:function(t){return this.actions.push(["repeat",t]),this},wait:function(t){return this.actions.push(["wait",t]),this},delay:function(t){return this.actions.push(["wait",t]),this},stop:function(){return this.manager.remove(this),this},play:function(){return this.manager.add(this),this.finished=!1,this},end:function(){for(var t=0,e=this.index+1;e<this.actions.length;e++)"object"==typeof this.actions[e][0]&&(t=e);return this.index=t-1,this.next(),this.delta=this.duration,this.step(0),this},forward:function(){this.delta=this.duration,this.step(0)},rewind:function(){this.delta=0,this.step(0)},next:function(){if(this.delta=0,this.index++,this.index>=this.actions.length){if(!this.looped)return void this.manager.remove(this);this.trigger("loop",{tween:this}),this.index=0}if(this.current=this.actions[this.index],"call"===this.current[0]){var t=this.current.slice(2),e=this.current[1],i=this.current[2],s=i[e];s.apply(i,t)}else if("wait"===this.current[0])this.duration=this.current[1],this.currentAction="wait";else{var n=this.current[0];this.keys=Object.keys(n),this.change=[],this.before=[],this.types=[];for(var o=0;o<this.keys.length;o++){var r=this.keys[o],a=this.context[r];if("number"==typeof n[r])a=a||0,this.before.push(a),this.change.push(n[r]-a),this.types.push(0);else if("string"==typeof n[r]&&n[r].indexOf("rad")>-1)a=a||0,this.before.push(a),this.change.push(PLAYGROUND.Utils.circWrappedDistance(a,parseFloat(n[r]))),this.types.push(2);else{a=a||"#000";var h=cq.color(a);this.before.push(h);for(var u=cq.color(n[r]),c=[],l=0;3>l;l++)c.push(u[l]-h[l]);this.change.push(c),this.types.push(1)}}this.currentAction="animate",this.duration=this.current[1],this.easing=this.current[2]}},prev:function(){},step:function(t){switch(this.delta+=t,this.current||this.next(),this.currentAction){case"animate":this.doAnimate(t);break;case"wait":this.doWait(t)}},doAnimate:function(t){this.progress=this.duration?Math.min(1,this.delta/this.duration):1;for(var e=PLAYGROUND.Utils.ease(this.progress,this.easing),i=0;i<this.keys.length;i++){var s=this.keys[i];switch(this.types[i]){case 0:this.context[s]=this.before[i]+this.change[i]*e;break;case 1:for(var n=this.change[i],o=this.before[i],r=[],a=0;3>a;a++)r.push(o[a]+n[a]*e|0);this.context[s]="rgb("+r.join(",")+")";break;case 2:this.context[s]=PLAYGROUND.Utils.circWrap(this.before[i]+this.change[i]*e)}}this.progress>=1&&this.next(),this.listeners.step&&this.trigger("step",{tween:this,dt:t})},doWait:function(t){this.delta>=this.duration&&this.next()},onremove:function(){this.trigger("finished",{tween:this}),this.trigger("finish",{tween:this}),this.finished=!0}},PLAYGROUND.Utils.extend(PLAYGROUND.Tween.prototype,PLAYGROUND.Events.prototype),PLAYGROUND.TweenManager=function(t){this.tweens=[],t&&(this.app=t,this.app.tween=this.tween.bind(this)),this.delta=0,this.app.on("step",this.step.bind(this))},PLAYGROUND.TweenManager.prototype={defaultEasing:"128",circ:function(t){return{type:"circ",value:t}},discard:function(t,e){for(var i=0;i<this.tweens.length;i++){var s=this.tweens[i];s.context===t&&s!==e&&this.remove(s)}},tween:function(t){var e=new PLAYGROUND.Tween(this,t);return this.add(e),e},step:function(t){this.delta+=t;for(var e=0;e<this.tweens.length;e++){var i=this.tweens[e];i._remove||i.step(t),i._remove&&this.tweens.splice(e--,1)}},add:function(t){t._remove=!1;var e=this.tweens.indexOf(t);-1===e&&this.tweens.push(t)},remove:function(t){t._remove||(t._remove=!0,t.onremove())}},PLAYGROUND.Application.prototype.loadAtlases=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t];if("object"==typeof e)for(var i in e)this.loadAtlases(e[i]);else this._loadAtlas(e)}},PLAYGROUND.Application.prototype.loadAtlas=function(){return this.loadAtlases.apply(this,arguments)},PLAYGROUND.Application.prototype._loadAtlas=function(t){var e=this.getAssetEntry(t,"atlases","png");this.loader.add(e.url);var i=this.atlases[e.key]={},s=i.image=new Image;s.addEventListener("load",function(){o.success(e.url)}),s.addEventListener("error",function(){o.error(e.url)}),s.src=e.url;var n=new XMLHttpRequest;n.open("GET",e.path+".json",!0),this.loader.add(e.path+".json");var o=this.loader;n.onload=function(){var t=JSON.parse(this.response);i.frames=[];for(var s=0;s<t.frames.length;s++){var n=t.frames[s];i.frames.push({region:[n.frame.x,n.frame.y,n.frame.w,n.frame.h],offset:[n.spriteSourceSize.x||0,n.spriteSourceSize.y||0],width:n.sourceSize.w,height:n.sourceSize.h})}o.success(e.path+".json")},n.send()},PLAYGROUND.Application.prototype.loadFontOld=function(t){function e(){var i=cq(32,32);i.font("10px "+t).fillText(16,16,16),i.trim(),i.width!==h||i.height!==u?c.loader.ready("font "+t):setTimeout(e,250)}var i=document.createElement("style");i.type="text/css";var s={woff:"woff",ttf:"truetype"},n="";for(var o in s){var r=s[o];n+=' url("fonts/'+t+"."+o+"\") format('"+r+"');"}i.textContent="@font-face { font-family: '"+t+"'; src: "+n+" }",document.head.appendChild(i);var a=cq(32,32);a.font("10px Testing"),a.fillText(16,16,16).trim();var h=a.width,u=a.height;this.loader.add("font "+t);var c=this;e()},PLAYGROUND.DefaultState={},PLAYGROUND.LoadingScreen={logoRaw:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANoAAAASBAMAAADPiN0xAAAAGFBMVEUAAQAtLixHSUdnaGaJioimqKXMzsv7/fr5shgVAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB98EAwkeA4oQWJ4AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAB9klEQVQ4y72UvW+rMBDAz+FrpVKrrFmesmapWNOlrKjSe1kZ+uoVAvj+/frujG1SaJcqJwU7voOf7xMQzQmsIDi5NPTMsLRntH3U+F6SAZo3NlCvcgBFJz8o+vkDiE63lI95Y/UmpinsZWkgJWJiDbAVQ16htptxSTNloIlugwaw001Ey3ASF3so6L1qLNXzQS5S0UGKL/CI5wWNriE0UH9Yty37LqIVg+wsqu7Ix0MwVBSF/dU+jv2SNnma021LEdPqVnMeU3xAu0kXcSGjmq7Ox4E2Wn88LZ2+EFj3avjixzai6VPVyuYveZLHF2XfdDnvAq27DIHGuq+0DJFsE30OtB1KqOwd8Dr7PcM4b+jfj2g5lp4WyntBK66qua3JzEA+uXJpwH/NlVuzRVPY/kTLB2mjuN+KwdZ8FOy8j2gDbEUSqumnSCY4lf4ibq3IhVM4ycZQRnv+zFqVdJQVn6BxvUqebGpuaNo3sZxwBzjajiMZOoBiwyVF+kCr+nUaJOaGpnAeRPPJZTr4FqmHRXcneEo4DqQ/ftfdnLeDrUAME8xWKPeKCwW6YkEpXfs3p1EWJhdcUAYP0TI/uYaV8cgjwBovaeyWwji2T9rTFIdS/cP/MnkTLRUWxgNNZVin7bT5fqT9miDcUVJzR1gRpfIONMmulU+5Qqr6zXAUqAAAAABJRU5ErkJggg==",create:function(){var t=this;this.logo=new Image,this.logo.addEventListener("load",function(){t.ready=!0,t.createElements()}),this.logo.src=this.logoRaw,this.background="#000",window.getComputedStyle&&(this.background=window.getComputedStyle(document.body).backgroundColor||"#000")},enter:function(){this.current=0},leave:function(){this.locked=!0,this.animation=this.app.tween(this).to({current:1},.5)},step:function(t){this.locked?this.animation.finished&&(this.locked=!1):this.current=this.current+Math.abs(this.app.loader.progress-this.current)*t},createElements:function(){this.width=.6*window.innerWidth|0,this.height=.1*window.innerHeight|0,this.wrapper=document.createElement("div"),this.wrapper.style.width=this.width+"px",this.wrapper.style.height=this.height+"px",this.wrapper.style.background="#000",this.wrapper.style.border="4px solid #fff",this.wrapper.style.position="absolute",this.wrapper.style.left=(window.innerWidth/2-this.width/2|0)+"px",this.wrapper.style.top=(window.innerHeight/2-this.height/2|0)+"px",this.wrapper.style.zIndex=100,this.progressBar=document.createElement("div"),this.progressBar.style.width="0%",this.progressBar.style.height=this.height+"px",this.progressBar.style.background="#fff"},render:function(){this.ready&&(this.progressBar.style.width=(100*this.current|0)+"%")}};
function setScale(){slideScale=slideWrap.offsetWidth>slideWrap.offsetHeight/slideRatio?slideWrap.offsetHeight/slideRatio/slideWidth:slideWrap.offsetWidth*slideRatio/slideHeight,slideScale=Math.max(Math.min(slideScale,slideScaleMax),slideScaleMin)+.001,slide.style.transform="scale("+slideScale+")"}function onResize(e){setScale()}function loadSlide(e){location.hash=e+1,window.dispatchEvent(slideChangeEvent),document.documentElement.classList.add("loading");var t=new XMLHttpRequest;t.open("GET","slides/"+slides[e]+"/index.html",!0),t.onload=function(){t.status>=200&&t.status<400&&(clearTimeout(slideTimeout),slideTimeout=setTimeout(function(){if(document.documentElement.classList.remove("loading"),null!==lastSlide){var i=document.querySelector(".stylesheet-"+lastSlide);i.parentNode.removeChild(i);var n=document.querySelector(".script-"+lastSlide);n.parentNode.removeChild(n)}var d=document.createElement("link");d.rel="stylesheet",d.href="slides/"+slides[e]+"/index.css",d.classList.add("stylesheet-"+e),document.getElementsByTagName("head")[0].appendChild(d),slideContent.innerHTML=t.responseText;var s=document.createElement("script");s.setAttribute("src","slides/"+slides[e]+"/index.js"),s.classList.add("script-"+e),document.getElementsByTagName("head")[0].appendChild(s)},20))},t.onerror=function(){},t.send()}function prevSlide(){currentSlide>0&&(document.documentElement.classList.add("prev"),document.documentElement.classList.remove("next"),lastSlide=currentSlide,currentSlide--,loadSlide(currentSlide))}function nextSlide(){totalSlides-1>currentSlide&&(document.documentElement.classList.add("next"),document.documentElement.classList.remove("prev"),lastSlide=currentSlide,currentSlide++,loadSlide(currentSlide))}var slideWrap=document.querySelector(".slide-wrap"),slide=document.querySelector(".slide"),slideContent=document.querySelector(".slide-content"),slideBcr=slide.getBoundingClientRect(),slideWidth=slideBcr.width,slideHeight=slideBcr.height,slideRatio=slideHeight/slideWidth,slideScaleMin=0,slideScaleMax=1/0,slideScale;addEventListener("resize",onResize),setScale();var slides=["title","demo","demo-2"],slideChangeEvent=new Event("slideChange"),slideTimeout=null,currentSlide=location.hash?location.hash.slice(1)-1:0,lastSlide=null,totalSlides=slides.length,prevSlideButton=document.querySelector(".nav-prev"),nextSlideButton=document.querySelector(".nav-next");currentSlide>totalSlides&&(currentSlide=0),prevSlideButton.addEventListener("click",function(e){e.preventDefault(),prevSlide()}),nextSlideButton.addEventListener("click",function(e){e.preventDefault(),nextSlide()}),loadSlide(currentSlide);var controlDownDownEvent=new Event("controlDownDown"),controlDownUpEvent=new Event("controlDownUp"),controlUpDownEvent=new Event("controlUpDown"),controlUpUpEvent=new Event("controlUpUp"),keyMap={up:["up","w"],right:["right","d"],down:["down","s"],left:["left","a"],prev:["openbracket","l1"],next:["closebraket","r1"]},keys={up:0,right:0,down:0,left:0},dirs={up:document.querySelector(".dir-up"),right:document.querySelector(".dir-right"),down:document.querySelector(".dir-down"),left:document.querySelector(".dir-left")},overview=playground({keydown:function(e){keyMap.up.indexOf(e.key)>-1?(keys.up=1,dirs.up.classList.add("is-active"),window.dispatchEvent(controlUpDownEvent)):keyMap.right.indexOf(e.key)>-1?(keys.right=1,dirs.right.classList.add("is-active")):keyMap.down.indexOf(e.key)>-1?(keys.down=1,dirs.down.classList.add("is-active"),window.dispatchEvent(controlDownDownEvent)):keyMap.left.indexOf(e.key)>-1?(keys.left=1,dirs.left.classList.add("is-active")):keyMap.prev.indexOf(e.key)>-1?prevSlide():keyMap.next.indexOf(e.key)>-1&&nextSlide()},keyup:function(e){keyMap.up.indexOf(e.key)>-1?(keys.up=0,dirs.up.classList.remove("is-active"),window.dispatchEvent(controlUpUpEvent)):keyMap.right.indexOf(e.key)>-1?(keys.right=0,dirs.right.classList.remove("is-active")):keyMap.down.indexOf(e.key)>-1?(keys.down=0,dirs.down.classList.remove("is-active"),window.dispatchEvent(controlDownUpEvent)):keyMap.left.indexOf(e.key)>-1&&(keys.left=0,dirs.left.classList.remove("is-active"))},gamepaddown:function(e){keyMap.up.indexOf(e.button)>-1?(keys.up=1,dirs.up.classList.add("is-active"),window.dispatchEvent(controlUpDownEvent)):keyMap.right.indexOf(e.button)>-1?(keys.right=1,dirs.right.classList.add("is-active")):keyMap.down.indexOf(e.button)>-1?(keys.down=1,dirs.down.classList.add("is-active"),window.dispatchEvent(controlDownDownEvent)):keyMap.left.indexOf(e.button)>-1?(keys.left=1,dirs.left.classList.add("is-active")):keyMap.prev.indexOf(e.button)>-1?prevSlide():keyMap.next.indexOf(e.button)>-1&&nextSlide()},gamepadup:function(e){keyMap.up.indexOf(e.button)>-1?(keys.up=0,dirs.up.classList.remove("is-active"),window.dispatchEvent(controlUpUpEvent)):keyMap.right.indexOf(e.button)>-1?(keys.right=0,dirs.right.classList.remove("is-active")):keyMap.down.indexOf(e.button)>-1?(keys.down=0,dirs.down.classList.remove("is-active"),window.dispatchEvent(controlDownUpEvent)):keyMap.left.indexOf(e.button)>-1&&(keys.left=0,dirs.left.classList.remove("is-active"))}});